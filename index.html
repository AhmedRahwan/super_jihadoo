<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Super Jihadoo</title>

  <link href="assets/css/reset.css" rel="stylesheet" />
  <link href="assets/css/stylesheet.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css?family=Patrick+Hand+SC" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="assets/images/favicon.png"/>

  <script>
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', 'https://www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-101227805-1', 'auto');
    ga('send', 'pageview');
  </script>
</head>

<body>
  <div class="main" id="main-content">
    <div class="description">
      <div>
        <h1>Super Jihadoo</h1>
        <h2>h3h3h3, man no time for another game</h2>
      </div>

      <div class="controls">
        <h2>Controls</h2>
        <h3>Move Left: &#8678; / A</h3>
        <h3>Move Right: &#8680; / D</h3>
        <h3>Jump: &#8679; / W / Spacebar</h3>
      </div>

      <div id="mute-button"></div>
      <div class="fourth-one"> </div>
    </div>

    <canvas id="game-canvas" width="850" height="600"></canvas>
    <audio id="background_music" autoplay loop>
      <source src="./assets/audio/music/mario_theme.mp3" type="audio/mp3" />
    </audio>

    <div class="contact">
      <div class="info">
        <!--<h2>Recreated by</h2>-->
      </div>

      <div class="links"></div>
    </div>

  </div>
  <div id="mobile-overlay" class="mobile-overlay" aria-hidden="true">
    <div class="mobile-overlay__content">
      <div class="mobile-overlay__speech">
        <p>
          Hey! This adventure plays best on a desktop browser.
          Grab a keyboard and meet me there!
        </p>
      </div>
      <img
        src="assets/sprites/jihadoooncoinbox.png"
        alt="Jihadoo coin box character"
        class="mobile-overlay__character"
      />
    </div>
  </div>
</body>

<script src="assets/javascripts/jquery.min.js"></script>
<script>
  (function () {
    const overlay = document.getElementById('mobile-overlay');
    const mainContent = document.getElementById('main-content');
    const backgroundMusic = document.getElementById('background_music');

    if (!overlay || !mainContent) {
      window.IS_MOBILE_BLOCKED = false;
      return;
    }

    const isMobileBrowser = () => {
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      const touchCapable = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
      const mobileRegex = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;
      const smallViewport = window.matchMedia('(max-width: 900px)').matches;
      return (mobileRegex.test(ua.toLowerCase()) || touchCapable) && smallViewport;
    };

    const applyState = (blocked) => {
      window.IS_MOBILE_BLOCKED = blocked;
      if (blocked) {
        overlay.classList.add('mobile-overlay--visible');
        overlay.setAttribute('aria-hidden', 'false');
        document.body.classList.add('mobile-blocked');
        mainContent.setAttribute('aria-hidden', 'true');
        if (backgroundMusic) {
          backgroundMusic.pause();
        }
      } else {
        overlay.classList.remove('mobile-overlay--visible');
        overlay.setAttribute('aria-hidden', 'true');
        document.body.classList.remove('mobile-blocked');
        mainContent.removeAttribute('aria-hidden');
        if (backgroundMusic && backgroundMusic.dataset.userPaused !== 'true') {
          backgroundMusic.play().catch(() => {});
        }
      }
    };

    let lastState;
    const toggleOverlay = () => {
      const blocked = isMobileBrowser();
      if (blocked !== lastState) {
        if (lastState === true && blocked === false) {
          applyState(blocked);
          window.location.reload();
          return;
        }
        if (lastState === false && blocked === true) {
          window.location.reload();
          return;
        }
        applyState(blocked);
        lastState = blocked;
      } else if (typeof lastState === 'undefined') {
        applyState(blocked);
        lastState = blocked;
      }
    };

    toggleOverlay();
    window.addEventListener('resize', toggleOverlay);
  }());
</script>
<script src="assets/javascripts/bundle.js"></script>

</html>

<!-- Mute icons made by Madebyoliver. http://www.flaticon.com/authors/madebyoliver -->
